#
#
#         Name: xmitmsgx.spec[.in] (RPM spec file)
#         Date: 2023-03-22 (Wed)
#               http://ftp.rpm.org/max-rpm/s1-rpm-build-creating-spec-file.html
#
#   Build with:
#               rpmbuild -bb --nodeps xmitmsgx.spec
#

Summary: XMM (xmitmsgx), work-alike for XMITMSG for POSIX
#Copyright: Casita.Net

# The name line defines what the package will actually be called.
#Name: xmitmsgx
Name: %SPEC_APPLID%
Version: %SPEC_VERSION%
Release: %SPEC_RELEASE%
License: GPL
# The group line is used to hold a string that defines how
# the packaged software should be grouped with other packages.
Group: Development/Languages
Source: xmitmsgx-%{version}.tar.gz
#Source: xmitmsgx-%{SPEC_VERSION}.tar.gz

#Prefix: %SPEC_PREFIX%
#Provides: xmitmsgx

URL: https://github.houston.softwaregrp.net/rtroth/ussw/archive/master.zip
#Buildroot: /tmp/xmitmsgx
# The distribution line identifies the product this package is part of.
Distribution: Casita.Net
Vendor: La Casita en la Esquina
Packager: Sir Santa

%description
This package provides similar capability for Unix/Linux/POSIX
to that of the 'XMITMSG' command and "APPLMSG" assembly language macro
found in the VM/CMS environment.

# the source has already been fetched
%prep
true

# do a 'make install' and this is not needed
%build
mkdir -p $HOME/rpmbuild/BUILDROOT/%APPLID%-%APPVRM%-%SPEC_RELEASE%.%UNAMEM%
rsync -a -u -x -H -O -S %SPEC_STAGING%/. $HOME/rpmbuild/BUILDROOT/%APPLID%-%APPVRM%-%SPEC_RELEASE%.%UNAMEM%/.

# we should have done a 'make install' before this step
%install
mkdir -p $HOME/rpmbuild/BUILDROOT/%APPLID%-%APPVRM%-%SPEC_RELEASE%.%UNAMEM%
rsync -a -u -x -H -O -S %SPEC_STAGING%/. $HOME/rpmbuild/BUILDROOT/%APPLID%-%APPVRM%-%SPEC_RELEASE%.%UNAMEM%/.

#%prefix %SPEC_PREFIX%
# The %files section is a list of the files that comprise the package.
# If it isn't in the file list, it won't be put into the package.
%files
#%defattr(-,root,root)
/usr/bin/xmitmsg
/usr/bin/xmiterr
/usr/lib/libxmitmsgx.a
/usr/lib/libxmitmsgxdyn.so
/usr/lib/libxmmrexx.so
/usr/lib/libxmmjava.so
/usr/lib/MessageService.class
/usr/include/xmitmsgx.h
/usr/share/locale/en_US/xmitmsgx.msgs
/usr/share/locale/en_US/errno.msgs
/usr/sbin/xmitmivp.sh
/usr/src/xmitmivp.c
#/usr/src/*.h
#/usr/src/makefile
/usr/src/xmmdemoc.c
/usr/src/xmmdemoc.sh
/usr/src/xmmrexx.rx
/usr/src/xmmrexx.sh
/usr/src/MessageDemo.java
/usr/src/MessageDemo.sh
#/opt/vendor/package/sbin/install.sh

%clean
# Here is where we clean-up after all the building and packaging.
true

%post
# Run the 'install.sh' after the content is deployed.
#sh /opt/vendor/package/sbin/install.sh
true


